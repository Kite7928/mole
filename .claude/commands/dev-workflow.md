# 标准化开发工作流（主入口）

基于 CLAUDE.md 的强制工作流程，按顺序执行完整开发流程。

---

## 触发条件

当用户提出开发任务（新功能、Bug修复、重构等）时，执行此工作流。

---

## 执行流程

### 第1步：深度思考分析

**必须首先执行**，不可跳过。

分析内容：
- 问题本质和需求边界
- 至少分析 3 个现有实现或模式，识别可复用的接口与约束
- 绘制依赖与集成点，确认输入输出协议
- 确认现有测试框架、命名约定和格式化规则

输出：问题分析 + 技术方案 + 风险评估

### 第2步：任务规划

- 将任务拆分为可执行步骤
- 涉及修改超过3个文件时，必须先分解成更小的独立单元
- 确定优先级和依赖关系

### 第3步：信息检索

按优先级使用工具：
1. 本地代码分析（Read/Grep/Glob）— 最高优先级
2. 编程文档查询 — 框架/库相关问题
3. GitHub 代码搜索 — 搜索开源实现示例
4. 网页搜索 — 仅在上述方式无法获取时使用

要求：所有引用资料必须写明来源与用途

### 第4步：方案先行

- 编码前必须先描述详细方案
- 等待用户批准后方可开始编码
- 需求不明确时必须提出澄清问题

### 第5步：代码实现

强制标准：
- ✅ 所有注释使用简体中文
- ✅ 遵循 SOLID、DRY、关注点分离
- ✅ 遵循项目既有代码风格
- ❌ 绝对禁止 MVP、最小实现或占位符
- ❌ 禁止过早抽象
- ✅ 评估时间复杂度、内存占用与 I/O 影响

### 第6步：编码后验证

- 列出潜在问题并提供测试用例
- 所有验证由本地执行
- 验证失败时立即终止

### 第7步：质量审查

使用评分体系：
- 技术维度（60分）：代码质量20 + 测试覆盖20 + 规范遵循20
- 战略维度（40分）：需求匹配15 + 架构一致15 + 风险评估10
- ≥90分通过 / <80分退回 / 80-89分需讨论

生成审查报告：`.claude/verification-report.md`

---

## 工具链顺序（禁止跳过或调换）

```
深度思考 → 任务规划 → 信息检索 → 方案审批 → 代码实现 → 自动验证 → 质量审查 → 决策
```

任一环节失败时，记录原因和补救措施。

---

## 关联命令

- `/pre-code` — 编码前规范检查
- `/post-code` — 编码后质量验证
- `/quality-review` — 独立质量审查
- `/code-standards` — 代码标准速查
