# 编码后质量验证

代码实现完成后执行此检查，确保质量达标、测试完备。

---

## 第1步：潜在问题排查

代码完成后必须列出以下内容：

```markdown
## 潜在问题清单

| 序号 | 问题描述 | 严重程度 | 处理方案 |
|------|---------|---------|---------|
| 1 | ... | 高/中/低 | ... |
```

检查维度：
- [ ] 边界条件是否处理？（空值、超长、并发）
- [ ] 错误路径是否覆盖？（网络异常、数据异常）
- [ ] 性能是否可接受？（时间复杂度、内存占用、I/O）
- [ ] 是否有未删除的过时/重复代码？
- [ ] 是否遵循项目既有代码风格？

## 第2步：测试用例

每次实现必须提供可运行的测试：

```markdown
## 测试用例

### 正常流程
- 用例1：<描述> → 预期结果：<结果>

### 边界条件
- 用例2：<描述> → 预期结果：<结果>

### 错误恢复
- 用例3：<描述> → 预期结果：<结果>
```

缺失测试必须记录为风险并给出补测计划。

## 第3步：本地验证

```bash
# 后端验证
cd backend && python -m pytest tests/ -v

# 前端验证
cd frontend && pnpm lint && pnpm type-check
```

- 所有验证由本地执行，拒绝远程流水线
- 验证失败时立即终止，不允许带缺陷交付
- 连续三次验证失败必须暂停，回到需求和设计阶段复盘

## 第4步：Bug修复流程

发现 bug 时：
1. 先编写复现测试
2. 确认测试能复现问题
3. 修复代码
4. 验证测试通过
5. 方可提交

---

## 核心原则

> 代码完成 ≠ 任务完成。测试通过 + 问题清零 + 验证达标 = 真正完成。
