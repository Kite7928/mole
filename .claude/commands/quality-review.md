# 质量审查评分

独立执行质量审查，对代码变更进行多维度评分和决策。

---

## 执行步骤

### 第1步：收集变更信息

```bash
git diff --name-only
git diff --stat
```

逐一阅读所有变更文件，理解改动内容。

### 第2步：技术维度评分（60分）

| 维度 | 满分 | 评分标准 |
|------|------|---------|
| 代码质量 | 20 | 规范性、可读性、可维护性、无冗余 |
| 测试覆盖 | 20 | 单元测试、边界条件、错误恢复覆盖率 |
| 规范遵循 | 20 | SOLID、DRY、项目风格、中文注释 |

### 第3步：战略维度评分（40分）

| 维度 | 满分 | 评分标准 |
|------|------|---------|
| 需求匹配 | 15 | 是否完整满足原始需求，无遗漏 |
| 架构一致 | 15 | 是否符合项目架构，复用优先 |
| 风险评估 | 10 | 是否引入新风险，破坏性评估 |

### 第4步：审查清单

- [ ] 需求字段完整性（目标、范围、交付物）
- [ ] 覆盖原始意图无遗漏或歧义
- [ ] 交付物映射明确（代码、文档、测试）
- [ ] 依赖与风险评估完毕
- [ ] 无 MVP/占位符/最小实现
- [ ] 无自研方案（优先复用生态）
- [ ] 简体中文注释和文档

### 第5步：输出报告

生成 `.claude/verification-report.md`：

```markdown
# 质量审查报告

**审查时间**：<时间戳>
**审查范围**：<变更文件列表>

## 评分

| 维度 | 得分 | 满分 | 说明 |
|------|------|------|------|
| 代码质量 | ? | 20 | ... |
| 测试覆盖 | ? | 20 | ... |
| 规范遵循 | ? | 20 | ... |
| 需求匹配 | ? | 15 | ... |
| 架构一致 | ? | 15 | ... |
| 风险评估 | ? | 10 | ... |
| **综合** | **?** | **100** | |

## 决策

- [ ] 通过（≥90分）
- [ ] 退回（<80分）
- [ ] 需讨论（80-89分）

## 问题清单

| 序号 | 问题 | 严重程度 | 建议 |
|------|------|---------|------|
| 1 | ... | 高/中/低 | ... |

## 审查结论

<结论说明>
```

---

## 决策规则

- **≥90分** 且建议"通过" → 确认通过
- **<80分** 且建议"退回" → 确认退回，列出必须修复项
- **80-89分** 或"需讨论" → 详细说明争议点，由用户决策
