@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   Apple Design System
   苹果风格设计系统
   ======================================== */

@layer base {
  :root {
    /* 苹果风格配色 */
    --background: 0 0% 96%; /* #F5F5F7 */
    --foreground: 0 0% 10%;
    
    --card: 0 0% 100%;
    --card-foreground: 0 0% 10%;
    
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 10%;
    
    --primary: 211 100% 50%; /* iOS Blue */
    --primary-foreground: 0 0% 100%;
    
    --secondary: 240 5% 96%;
    --secondary-foreground: 0 0% 10%;
    
    --muted: 240 5% 96%;
    --muted-foreground: 240 4% 46%;
    
    --accent: 240 5% 96%;
    --accent-foreground: 0 0% 10%;
    
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    
    --border: 240 6% 90%;
    --input: 240 6% 90%;
    --ring: 211 100% 50%;
    
    --radius: 1rem;
    
    /* 苹果风格阴影 */
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.04);
    --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.08);
    --shadow-md: 0 4px 12px 0 rgb(0 0 0 / 0.08);
    --shadow-lg: 0 8px 24px 0 rgb(0 0 0 / 0.1);
    --shadow-xl: 0 16px 48px 0 rgb(0 0 0 / 0.12);
  }

  .dark {
    --background: 0 0% 7%;
    --foreground: 0 0% 95%;
    
    --card: 0 0% 10%;
    --card-foreground: 0 0% 95%;
    
    --popover: 0 0% 10%;
    --popover-foreground: 0 0% 95%;
    
    --primary: 211 100% 55%;
    --primary-foreground: 0 0% 100%;
    
    --secondary: 240 4% 16%;
    --secondary-foreground: 0 0% 95%;
    
    --muted: 240 4% 16%;
    --muted-foreground: 240 5% 65%;
    
    --accent: 240 4% 16%;
    --accent-foreground: 0 0% 95%;
    
    --border: 240 4% 20%;
    --input: 240 4% 20%;
    --ring: 211 100% 55%;
    
    --border: 220 14% 18%;
    --input: 220 14% 18%;
    --ring: 222 83% 53%;
    
    --secondary: 220 14% 16%;
    --secondary-foreground: 0 0% 95%;
    
    --accent: 220 14% 16%;
    --accent-foreground: 0 0% 95%;
    
    --muted: 220 14% 16%;
    --muted-foreground: 220 14% 60%;
  }
}

/* ========================================
   基础样式重置与优化
   ======================================== */

@layer base {
  * {
    @apply border-border;
  }

  html {
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    @apply bg-background text-foreground;
    font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* 选中文本样式 */
  ::selection {
    background-color: hsl(var(--primary) / 0.2);
    color: hsl(var(--foreground));
  }

  /* 苹果风格滚动条 */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.15);
    border-radius: 100px;
    border: 2px solid transparent;
    background-clip: padding-box;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 0, 0, 0.25);
  }

  * {
    scrollbar-width: thin;
    scrollbar-color: rgba(0, 0, 0, 0.15) transparent;
  }
}

/* ========================================
   组件样式系统
   ======================================== */

@layer components {
  /* ===== 卡片组件 ===== */
  .art-card {
    @apply bg-card rounded-lg border shadow-sm;
    @apply transition-all duration-300 ease-smooth;
  }

  .art-card:hover {
    @apply shadow-md;
    transform: translateY(-1px);
  }

  .art-card-interactive {
    @apply art-card cursor-pointer;
  }

  .art-card-interactive:hover {
    @apply border-primary/30;
    box-shadow: var(--shadow-md), 0 0 0 1px hsl(var(--primary) / 0.1);
  }

  .art-card-interactive:active {
    transform: translateY(0) scale(0.995);
  }

  /* ===== 按钮组件 ===== */
  .art-button {
    @apply inline-flex items-center justify-center gap-2;
    @apply px-4 py-2.5 rounded-lg font-medium text-sm;
    @apply transition-all duration-200 ease-smooth;
    @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary/20;
  }

  .art-button-primary {
    @apply art-button;
    @apply bg-primary text-primary-foreground;
    @apply shadow hover:shadow-md;
    @apply hover:bg-primary/90;
  }

  .art-button-primary:hover {
    transform: translateY(-0.5px);
  }

  .art-button-primary:active {
    transform: translateY(0);
  }

  .art-button-secondary {
    @apply art-button;
    @apply bg-secondary text-secondary-foreground;
    @apply border border-border hover:bg-background;
  }

  .art-button-ghost {
    @apply art-button;
    @apply hover:bg-muted;
  }

  .art-button-sm {
    @apply px-3 py-1.5 text-xs rounded-md;
  }

  .art-button-lg {
    @apply px-6 py-3 text-base rounded-xl;
  }

  /* ===== 输入框组件 ===== */
  .art-input {
    @apply w-full px-4 py-2.5 rounded-lg;
    @apply bg-background border border-input;
    @apply text-foreground placeholder:text-muted-foreground;
    @apply transition-all duration-200;
    @apply focus:outline-none focus:border-primary/50 focus:ring-2 focus:ring-primary/10;
  }

  .art-input:hover {
    @apply border-muted-foreground;
  }

  /* ===== 标签组件 ===== */
  .art-badge {
    @apply inline-flex items-center gap-1.5;
    @apply px-2.5 py-0.5 rounded-full text-xs font-medium;
    @apply transition-colors duration-200;
  }

  .art-badge-primary {
    @apply art-badge;
    @apply bg-primary/10 text-primary border border-primary/20;
  }

  .art-badge-secondary {
    @apply art-badge;
    @apply bg-muted text-muted-foreground;
  }

  .art-badge-success {
    @apply art-badge;
    @apply bg-green-500/10 text-green-600 dark:text-green-400 border border-green-500/20;
  }

  .art-badge-warning {
    @apply art-badge;
    @apply bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border border-yellow-500/20;
  }

  /* ===== 分割线 ===== */
  .art-divider {
    @apply h-px w-full bg-border;
  }

  .art-divider-vertical {
    @apply w-px h-full bg-border;
  }

  /* ===== 页面容器 ===== */
  .art-container {
    @apply w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  .art-section {
    @apply py-12 lg:py-16;
  }

  /* ===== 标题层级 ===== */
  .art-title-display {
    @apply text-display font-bold tracking-tight text-foreground;
  }

  .art-title {
    @apply text-title font-semibold tracking-tight text-foreground;
  }

  .art-subtitle {
    @apply text-subtitle font-semibold text-foreground;
  }

  .art-heading {
    @apply text-heading font-semibold text-foreground;
  }

  .art-body-lg {
    @apply text-body-lg text-secondary-foreground;
  }

  .art-body {
    @apply text-body text-secondary-foreground;
  }

  .art-body-sm {
    @apply text-body-sm text-muted-foreground;
  }

  .art-caption {
    @apply text-caption text-muted-foreground;
  }

  /* ===== 列表项 ===== */
  .art-list-item {
    @apply flex items-center gap-3 px-4 py-3 rounded-lg;
    @apply transition-colors duration-200;
    @apply hover:bg-muted cursor-pointer;
  }

  .art-list-item-active {
    @apply art-list-item bg-primary/5 text-primary;
  }

  /* ===== 统计卡片 ===== */
  .art-stat-card {
    @apply art-card p-6;
  }

  .art-stat-value {
    @apply text-3xl font-bold tracking-tight text-foreground;
  }

  .art-stat-label {
    @apply text-sm text-secondary-foreground mt-1;
  }

  .art-stat-trend-up {
    @apply text-xs font-medium text-green-600 dark:text-green-400;
  }

  .art-stat-trend-down {
    @apply text-xs font-medium text-red-600 dark:text-red-400;
  }

  /* ===== 骨架屏 ===== */
  .art-skeleton {
    @apply animate-pulse bg-muted rounded;
  }

  .art-skeleton-text {
    @apply art-skeleton h-4;
  }

  .art-skeleton-title {
    @apply art-skeleton h-6 w-3/4;
  }

  .art-skeleton-avatar {
    @apply art-skeleton h-10 w-10 rounded-full;
  }

  /* ===== 空状态 ===== */
  .art-empty {
    @apply flex flex-col items-center justify-center py-12 text-center;
  }

  .art-empty-icon {
    @apply w-16 h-16 mb-4 text-muted-foreground;
  }

  .art-empty-title {
    @apply text-lg font-medium text-foreground mb-1;
  }

  .art-empty-description {
    @apply text-sm text-secondary-foreground max-w-sm;
  }

  /* ===== 提示框 ===== */
  .art-tooltip {
    @apply absolute z-50 px-2.5 py-1.5;
    @apply text-xs text-white bg-foreground rounded-md;
    @apply shadow-lg;
  }

  /* ===== 玻璃拟态效果 ===== */
  .art-glass {
    @apply bg-white/80 dark:bg-black/50 backdrop-blur-xl;
    @apply border border-white/20 dark:border-white/10;
  }
}

/* ========================================
   工具类
   ======================================== */

@layer utilities {
  /* 文本截断 */
  .art-line-clamp-1 {
    @apply overflow-hidden text-ellipsis whitespace-nowrap;
  }

  .art-line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .art-line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* 焦点环 */
  .art-focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-primary/20 focus:ring-offset-2 focus:ring-offset-background;
  }

  /* 禁用状态 */
  .art-disabled {
    @apply opacity-50 cursor-not-allowed pointer-events-none;
  }

  /* 渐变文本 */
  .art-gradient-text {
    @apply bg-gradient-to-r from-primary to-primary-400 bg-clip-text text-transparent;
  }

  /* 悬停提升效果 */
  .art-lift {
    @apply transition-transform duration-300 ease-smooth;
  }

  .art-lift:hover {
    transform: translateY(-2px);
  }

  /* 点击缩放效果 */
  .art-press {
    @apply transition-transform duration-150;
  }

  .art-press:active {
    transform: scale(0.97);
  }

  /* 图片容器 */
  .art-aspect-video {
    aspect-ratio: 16 / 9;
  }

  .art-aspect-square {
    aspect-ratio: 1 / 1;
  }

  /* 网格布局 */
  .art-grid-cards {
    @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6;
  }

  /* 动画延迟 */
  .art-delay-100 { animation-delay: 100ms; }
  .art-delay-200 { animation-delay: 200ms; }
  .art-delay-300 { animation-delay: 300ms; }
  .art-delay-400 { animation-delay: 400ms; }
  .art-delay-500 { animation-delay: 500ms; }

  /* 安全区域 */
  .art-safe-area-x {
    @apply px-4 sm:px-6 lg:px-8;
  }

  .art-safe-area-y {
    @apply py-4 sm:py-6;
  }
}

/* ========================================
   打印样式
   ======================================== */

@media print {
  .art-no-print {
    display: none !important;
  }
}
